<div class="container my-4">
  <!-- Widgets Section -->
  <div class="row g-3" style="--bs-columns: 3;">
    <!-- Widget: headquarter tasks -->
    <div class="col-md-4" *ngFor="let headquarter of ceoData?.headquarters; let i = index">
      <div class="card text-white shadow rounded-3" [ngClass]="getColor(i)">
        <div class="card-header fw-bold">Tareas {{ headquarter.headquarterName }}</div>
        <div class="card-body">
          <h5 class="card-title">Tareas</h5>
          <p class="card-text">
            <span>Total Tareas :</span> <strong>{{ headquarter.totalTasks }}</strong><br>
            <span>Total Tareas Completadas:</span> <strong>{{ headquarter.completedTasks }}</strong>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Tables and Chart Section -->
  <div class="row mt-4">
    <!-- Pending Tasks Table -->
    <div class="col-md-4">
      <div class="card shadow-sm rounded-3">
        <div class="card-header bg-white text-dark fw-bold">Tareas Pendientes</div>
        <div class="card-body">
          <div class="table-responsive" style="max-height: 662px; overflow-y: auto;">
            <table class="table table-bordered table-striped table-hover rounded-3">
              <thead class="table-dark">
                <tr>
                  <th>Tarea</th>
                  <th>Empleado Asignado</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let headquarter of ceoData?.headquarters">
                  <tr *ngFor="let user of headquarter.pendingUsers">
                    <td>{{ user.taskTitle }}</td>
                    <td>{{ user.user }}</td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Compliance Percentage Table and Chart -->
    <div class="col-md-8">
      <div class="row">
        <!-- Compliance Percentage Table -->
        <div class="col-md-12 mb-1">
          <div class="card shadow-sm rounded-3">
            <div class="card-header bg-white text-dark fw-bold">Cumplimiento</div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-bordered table-striped table-hover rounded-3 overflow-hidden">
                  <thead class="table-dark">
                    <tr>
                      <th>Sede</th>
                      <th>Porcentaje de Cumplimiento</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let headquarter of ceoData?.headquarters">
                      <td>{{ headquarter.headquarterName }}</td>
                      <td>{{ headquarter.compliancePercentage }}%</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Global Task Comparison Chart -->
        <div class="col-md-12">
          <div class="card shadow-sm rounded-3">
            <div class="card-header bg-white text-dark fw-bold">Rendimiento por Sede</div>
            <div class="card-body">
              <canvas id="globalTaskComparisonChart" width="200" height="100"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
